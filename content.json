{"meta":{"title":"survival_F","subtitle":"Do what u love, love what u do","description":"","author":"zhangyifeng","url":"https://surviavalf.github.io","root":"/"},"pages":[],"posts":[{"title":"人员选择器","slug":"personnel-selection","date":"2021-08-18T03:14:07.000Z","updated":"2021-08-18T05:01:40.610Z","comments":true,"path":"2021/08/18/personnel-selection/","link":"","permalink":"https://surviavalf.github.io/2021/08/18/personnel-selection/","excerpt":"","text":"使用 Element-plus 中的 Transfer 穿梭框 组件封装的一个人员选择器，使用的是 VUE3 中的 setup 语法糖写法 选择器子组件的.vue 文件代码userMailList 为全部人员 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133&lt;template&gt; &lt;el-dialog title=&quot;人员选择&quot; v-model=&quot;show&quot; width=&quot;640px&quot; :close-on-click-modal=&quot;false&quot; center @close=&quot;clearitems&quot; &gt; &lt;div class=&quot;peopleCheck&quot;&gt; &lt;el-transfer v-model=&quot;yetPeople&quot; filterable :filter-method=&quot;filterMethod&quot; filter-placeholder=&quot;请输入人员拼音&quot; :data=&quot;allPeople&quot; @left-check-change=&quot;changeLeftPeople&quot; :titles=&quot;[&#x27;未选人员&#x27;, &#x27;已选人员&#x27;]&quot; /&gt; &lt;/div&gt; &lt;template #footer&gt; &lt;span class=&quot;dialog-footer&quot;&gt; &lt;el-button @click=&quot;check&quot;&gt;确认&lt;/el-button&gt; &lt;/span&gt; &lt;/template&gt; &lt;/el-dialog&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref, reactive, onMounted, defineEmits, defineProps, defineExpose, watch,&#125; from &quot;vue&quot;;import &#123; userMailList &#125; from &quot;@/http/api/workbench&quot;;const emits = defineEmits([&quot;clearitems&quot;, &quot;backData&quot;]);const props = defineProps(&#123; choosePeople: &#123; type: Array, default: () =&gt; &#123; return []; &#125;, &#125;, type: &#123; type: String, default: () =&gt; &#123; return &quot;&quot;; &#125;, &#125;,&#125;);let show = ref(true);let yetPeople = ref([]);let allPeople = ref([]);let leftPeople = ref(&quot;&quot;);//拉取数据const generateData = async () =&gt; &#123; let res = await userMailList(&#123;&#125;); let peopleList = res.data; const datain = []; peopleList.forEach((item, index) =&gt; &#123; datain.push(&#123; label: item.userName, key: item.accountId, spell: item.userName, disabled: item.isMain === true ? true : false, isAdmin: item.isMain, &#125;); &#125;); allPeople.value = datain; yetPeople.value = JSON.parse(JSON.stringify(props.choosePeople));&#125;;//确认const check = () =&gt; &#123; emits(&quot;backData&quot;, yetPeople.value); clearitems();&#125;;//左侧选择的人员监听const changeLeftPeople = (query, item) =&gt; &#123; leftPeople.value = query;&#125;;//退出const clearitems = () =&gt; &#123; emits(&quot;clearitems&quot;);&#125;;//自定义搜索方法const filterMethod = (query, item) =&gt; &#123; return item.spell.indexOf(query) &gt; -1;&#125;;// 监听//监听左侧人员选择状态watch(leftPeople, (nVal) =&gt; &#123; if (leftPeople.value.length &gt; 0 &amp;&amp; props.type == &quot;limt1&quot;) &#123; allPeople.value.forEach((item, index) =&gt; &#123; if (item.key != leftPeople.value) &#123; item.disabled = true; &#125; &#125;); &#125; else if (props.type == &quot;limt1&quot;) &#123; allPeople.value.forEach((item, index) =&gt; &#123; if (item.isAdmin !== true) &#123; item.disabled = false; &#125; &#125;); &#125;&#125;);//监听右侧是否有已选择的人员watch(yetPeople, (nVal) =&gt; &#123; if (yetPeople.value.length == 0 &amp;&amp; props.type == &quot;limt1&quot;) &#123; allPeople.value.forEach((item, index) =&gt; &#123; if (item.isAdmin !== true) &#123; item.disabled = false; &#125; &#125;); &#125;&#125;);onMounted(() =&gt; &#123; generateData();&#125;);&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.peopleCheck &#123; height: 500px; ::v-deep(.el-transfer-panel__body) &#123; height: 350px; &#125; ::v-deep(.el-transfer-panel__list.is-filterable) &#123; height: 350px; &#125;&#125;&lt;/style&gt; 父组件的部分代码template 内引入子组件123456789&lt;PeopleCheck ref=&quot;refPeopleCheck&quot; v-if=&quot;checkPeopleCheck&quot; :choosePeople=&quot;choosePeople&quot; 已选的人员的ID数组 type=&quot;limt1&quot; 打开只能从左侧选择一个人的模式 @backData=&quot;backData&quot; 回显 @clearitems=&quot;clearitems&quot; 关闭 /&gt; js1234567891011121314//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓成员选择组件↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓////打开成员选择const peopleCheckShow = async (row) =&gt; &#123; //已选择的人 choosePeople.value = &#123;&#123;子组件中peopleList的key相对应 &#125;&#125; checkPeopleCheck.value = true;&#125;;//成员选择回显的数据const backData = (data) =&gt; &#123;&#125;;//关闭const clearitems = (row) =&gt; &#123; checkPeopleCheck.value = false;&#125;;//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑成员选择组件↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑//","categories":[{"name":"web前端","slug":"web前端","permalink":"https://surviavalf.github.io/categories/web%E5%89%8D%E7%AB%AF/"},{"name":"Element组件","slug":"web前端/Element组件","permalink":"https://surviavalf.github.io/categories/web%E5%89%8D%E7%AB%AF/Element%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"https://surviavalf.github.io/tags/Vue3/"},{"name":"ElementPlus","slug":"ElementPlus","permalink":"https://surviavalf.github.io/tags/ElementPlus/"}],"author":"zhangyifeng"},{"title":"Hello World","slug":"hello-world","date":"2021-08-16T06:11:30.000Z","updated":"2021-08-18T02:26:05.553Z","comments":true,"path":"2021/08/16/hello-world/","link":"","permalink":"https://surviavalf.github.io/2021/08/16/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[],"author":"zhangyifeng"}],"categories":[{"name":"web前端","slug":"web前端","permalink":"https://surviavalf.github.io/categories/web%E5%89%8D%E7%AB%AF/"},{"name":"Element组件","slug":"web前端/Element组件","permalink":"https://surviavalf.github.io/categories/web%E5%89%8D%E7%AB%AF/Element%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"https://surviavalf.github.io/tags/Vue3/"},{"name":"ElementPlus","slug":"ElementPlus","permalink":"https://surviavalf.github.io/tags/ElementPlus/"}]}